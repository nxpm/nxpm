(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{163:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return c})),a.d(t,"metadata",(function(){return i})),a.d(t,"rightToc",(function(){return b})),a.d(t,"default",(function(){return p}));var n=a(2),r=a(11),l=(a(0),a(169)),c={id:"release",title:"nxpm release",sidebar_label:"release"},i={id:"commands/release",title:"nxpm release",description:"The `release` command helps versioning, releasing packages to GitHub and publishing them to npm.",source:"@site/docs/commands/release.md",permalink:"/docs/commands/release",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/commands/release.md",sidebar_label:"release",sidebar:"someSidebar",previous:{title:"Using nxpm cli",permalink:"/docs/cli/usage"},next:{title:"Releasing packages",permalink:"/docs/guides/releasing-packages"}},b=[{value:"Dry Run",id:"dry-run",children:[]},{value:"Release",id:"release",children:[]},{value:"Options",id:"options",children:[]}],o={rightToc:b};function p(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(l.b)("wrapper",Object(n.a)({},o,a,{components:t,mdxType:"MDXLayout"}),Object(l.b)("p",null,"The ",Object(l.b)("inlineCode",{parentName:"p"},"release")," command helps versioning, releasing packages to GitHub and publishing them to npm."),Object(l.b)("p",null,"Before it does this, it will validate the workspace and can fix some inconsistencies that might exist in your packages."),Object(l.b)("h2",{id:"dry-run"},"Dry Run"),Object(l.b)("p",null,"Because you probably don't want to risk publishing broken packages to npm, it's smart to run the release command in dry-run mode:"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell",metastring:"script",script:!0}),"nxpm release 1.0.0 --dry-run\n")),Object(l.b)("p",null,"This will run the validations and tell you if it's able to release the package or if you need to fix things."),Object(l.b)("p",null,"The cli has a ",Object(l.b)("inlineCode",{parentName:"p"},"--fix")," option that will fix the issues for you."),Object(l.b)("h2",{id:"release"},"Release"),Object(l.b)("p",null,"Once you are happy with the suggested release plan, you can run it:"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell",metastring:"script",script:!0}),"nxpm release 1.0.0 --dry-run\n")),Object(l.b)("div",{className:"admonition admonition-important alert alert--info"},Object(l.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(l.b)("h5",{parentName:"div"},Object(l.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(l.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(l.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"important")),Object(l.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(l.b)("p",{parentName:"div"},"The ",Object(l.b)("inlineCode",{parentName:"p"},"release")," command does ",Object(l.b)("strong",{parentName:"p"},"not")," build your packages."),Object(l.b)("p",{parentName:"div"},"In order to build all your packages you can run:"),Object(l.b)("pre",{parentName:"div"},Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell",metastring:"script",script:!0}),"yarn nx run-many --target build --all\n")))),Object(l.b)("h2",{id:"options"},"Options"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Option"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Alias"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Default"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"version"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"n/a"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"none"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The version you want to release in semver format (eg: 1.2.3-beta.4)")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"--cwd"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-c"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"process.cwd()"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The version you want to release in semver format (eg: 1.2.3-beta.4)")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"--dry-run"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-d"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"false"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Dry run, don't make permanent changes")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"--fix"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-f"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"false"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Automatically fix known issues")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"--help"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-h"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"false"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"show CLI help")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"--allow-ivy"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-i"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"true"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Allow publishing Angular packages built for Ivy")))))}p.isMDXComponent=!0},169:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return d}));var n=a(0),r=a.n(n);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=r.a.createContext({}),p=function(e){var t=r.a.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):i({},t,{},e)),a},s=function(e){var t=p(e.components);return r.a.createElement(o.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},m=Object(n.forwardRef)((function(e,t){var a=e.components,n=e.mdxType,l=e.originalType,c=e.parentName,o=b(e,["components","mdxType","originalType","parentName"]),s=p(a),m=n,d=s["".concat(c,".").concat(m)]||s[m]||u[m]||l;return a?r.a.createElement(d,i({ref:t},o,{components:a})):r.a.createElement(d,i({ref:t},o))}));function d(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var l=a.length,c=new Array(l);c[0]=m;var i={};for(var b in t)hasOwnProperty.call(t,b)&&(i[b]=t[b]);i.originalType=e,i.mdxType="string"==typeof e?e:n,c[1]=i;for(var o=2;o<l;o++)c[o]=a[o];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,a)}m.displayName="MDXCreateElement"}}]);